"use client";

import {
  AppLayout,
  AppHeader,
  AppHeaderGroup,
  AppNav,
  AppNavToggle,
  AppNavList,
  AppSidebar,
  AppSidebarToggle,
  AppSidebarList,
  AppContent,
  AppNavItemType,
  AppSidebarItemType,
} from "@/components/ui/app-layout";
import { Avatar } from "@/components/ui/avatar";
import { DarkModeToggle } from "@/components/ui/dark-mode";
import {
  DropdownMenu,
  DropdownMenuItemType,
  DropdownMenuList,
} from "@/components/ui/dropdown-menu";
import { ReactNode } from "react";
import { usePathname } from "next/navigation";
import {
  LogOutIcon,
  UserIcon,
  GaugeIcon,
  SettingsIcon,
  Table2Icon,
} from "lucide-react";
import { SelectUser } from "@/schema/users";

const nav: AppNavItemType[] = [{ text: "Home", link: "/" }];

const sidebar: AppSidebarItemType[] = [
  {
    text: "Admin",
    items: [
      {
        text: "Admin Dashboard",
        link: "/admin",
        icon: GaugeIcon,
      },
      // DRIZZLE_NEXT_SIDEBAR_ITEMS
    ],
  },
];

const dropdown: DropdownMenuItemType[] = [
  { text: "Settings", link: "/admin/settings", icon: SettingsIcon },
  { text: "Sign out", link: "/signout", icon: LogOutIcon },
];

export function AdminLayout({
  children,
  userObj,
}: {
  children: ReactNode;
  userObj: SelectUser;
}) {
  const pathname = usePathname();

  return (
    <AppLayout>
      <AppHeader>
        <AppHeaderGroup>
          <AppSidebarToggle />
          Drizzle Admin
        </AppHeaderGroup>
        <AppHeaderGroup>
          <AppNav>
            <AppNavList items={nav} pathname={pathname} />
            <DarkModeToggle />
          </AppNav>
          <AppNavToggle />
          <DropdownMenu
            buttonEl={<Avatar src={userObj.image} />}
            buttonSizeVariant="avatar"
            buttonVariant="ghost"
          >
            <DropdownMenuList items={dropdown} />
          </DropdownMenu>
        </AppHeaderGroup>
      </AppHeader>
      <AppSidebar>
        <AppSidebarList items={sidebar} pathname={pathname} />
      </AppSidebar>
      <AppContent>{children}</AppContent>
    </AppLayout>
  );
}
