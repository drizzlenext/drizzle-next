"use client";

import {
  AppLayout,
  AppHeader,
  AppHeaderGroup,
  AppSidebarToggle,
  AppContent,
  AppSidebar,
  AppNav,
  AppNavToggle,
  DarkModeToggle,
  AppSidebarList,
  AppNavList,
} from "drizzle-admin/drizzle-ui";
import { ReactNode } from "react";
import { usePathname } from "next/navigation";
import { DrizzleLayoutConfig } from "drizzle-admin/types";
import { LogOutIcon, UserIcon, GaugeIcon } from "lucide-react";

const config: DrizzleLayoutConfig = {
  nav: [
    { text: "Settings", link: "/admin/settings" },
    { text: "Sign Out", link: "/signout", icon: LogOutIcon },
  ],
  sidebar: [
    {
      text: "Admin",
      items: [
        {
          text: "Admin Dashboard",
          link: "/admin",
          icon: GaugeIcon,
        },
        { text: "Users", link: "/admin/users", icon: UserIcon },
      ],
    },
  ],
};

export function AdminLayout({ children }: { children: ReactNode }) {
  const pathname = usePathname();

  return (
    <AppLayout>
      <AppHeader>
        <AppHeaderGroup>
          <AppSidebarToggle />
          Drizzle Admin
        </AppHeaderGroup>
        <AppNav>
          <AppNavList items={config.nav} pathname={pathname} />
          <DarkModeToggle />
        </AppNav>
        <AppNavToggle />
      </AppHeader>
      <AppSidebar>
        <AppSidebarList items={config.sidebar} pathname={pathname} />
      </AppSidebar>
      <AppContent>{children}</AppContent>
    </AppLayout>
  );
}
