"use client";

import {
  AppContent,
  AppHeader,
  AppLayout,
  AppNav,
  AppSidebar,
  AppSidebarGroup,
  AppSidebarItem,
  AppTitle,
} from "@/components/ui/dashboard-layout";
import {
  User2Icon,
  LogOutIcon,
  LayoutAppIcon,
  UserIcon,
  Table2Icon,
} from "lucide-react";
import { Avatar } from "@/components/ui/avatar";
import { User } from "@/schema/users";
import Link from "next/link";
import { usePathname } from "next/navigation";

const items = [
  { text: "Dashboard", link: "/dashboard", icon: LayoutDashboardIcon },
  { text: "Profile", link: "/profile", icon: UserIcon },
  { text: "Sign out", link: "/signout", icon: LogOutIcon },
];

export function PrivateLayout({
  userRow,
  children,
}: {
  userRow: User;
  children: React.ReactNode;
}) {
  const pathname = usePathname();

  return (
    <AppLayout>
      <AppHeader>
        <AppTitle>Drizzle Next</AppTitle>
        <AppNav>
          <Avatar src={userRow.image}>
            <User2Icon />
          </Avatar>
        </AppNav>
      </AppHeader>
      <AppSidebar>
        <AppSidebarGroup>
          {items.map((item) => (
            <Link key={item.text} href={item.link}>
              <AppSidebarItem active={pathname === item.link}>
                <item.icon size={16} /> {item.text}
              </AppSidebarItem>
            </Link>
          ))}
        </AppSidebarGroup>
      </AppSidebar>
      <AppContent>{children}</AppContent>
    </AppLayout>
  );
}
